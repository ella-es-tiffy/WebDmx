# DMX Web Software - Development Guidelines

## Architecture Principles

### 1. Object-Oriented Programming (OOP) Only
- All code must follow OOP principles
- Use classes, interfaces, inheritance, encapsulation
- No procedural/functional spaghetti code
- Proper separation of concerns

### 2. API-Based Communication
- Frontend ↔ Backend communication via REST APIs and WebSocket APIs
- JSON data format
- Proper HTTP methods (GET, POST, PUT, DELETE)
- RESTful endpoint design

### 3. Performance & Efficiency
- Optimize for real-time DMX operations
- Minimize latency between UI and hardware
- Efficient data structures
- Non-blocking I/O operations
- Memory-efficient implementations

### 4. Clean Code - No Spaghetti
- Clear separation of concerns
- Single Responsibility Principle
- DRY (Don't Repeat Yourself)
- Readable, maintainable code
- Proper naming conventions
- Code documentation where needed

### 5. Modern Standards Only
- Use latest language features (ES2024+ for JavaScript/TypeScript)
- No deprecated methods or libraries
- Modern async/await patterns (no callback hell)
- Current best practices

### 6. Frontend Framework Usage
- **CSS Framework:** Use modern CSS framework (TailwindCSS, Bootstrap 5, or similar)
- **JavaScript Framework:** Modern frameworks allowed (Vue.js, React, Alpine.js)
- **PHP Framework (if needed):** Use modern approach, no raw PHP spaghetti
- Responsive design
- Component-based architecture

### 7. Version Control with Git
- **Repository:** https://github.com/ella-es-tiffy/WebDmx
- All code must be tracked in Git
- Proper branch management
- Clear commit messages

### 8. Semantic Versioning
- Follow SemVer (MAJOR.MINOR.PATCH)
- Document version changes in CHANGELOG.md
- Tag releases properly
- Breaking changes must bump MAJOR version

### 9. Regular Commits
- Commit frequently with meaningful messages
- Each commit should represent a logical unit of work
- Format: `[type]: description` (e.g., `feat: add DMX channel controller`, `fix: serial port connection issue`)
- Types: feat, fix, refactor, docs, style, test, chore
- Push to remote regularly

### 10. MVC Architecture - Maximum Flexibility
- **Model-View-Controller** pattern is mandatory
- **Model:** Data structures, business logic, DMX device definitions
- **View:** UI components, templates, visual representations
- **Controller:** Request handling, API endpoints, user input processing
- Strict separation allows easy extension and modification
- Modular design for future feature additions

### 11. Basic Feature Set
The software must provide the following core functionality:

#### Device Management
- Add/remove/edit lighting fixtures and DMX devices
- Store device information (manufacturer, model, channel layout, capabilities)
- Persist device library to database
- Device profiles with channel definitions (intensity, color, pan/tilt, gobo, etc.)

#### Channel Control
- Select individual channels or channel groups
- Modify DMX values via:
  - Input fields (numeric 0-255)
  - Buttons (preset values, bumps)
  - Switches (on/off toggles)
  - Sliders (faders for smooth control)
- Real-time value updates
- Live DMX output feedback

#### Color Mixing
- Visual color picker for RGB/RGBA/CMY fixtures
- Graphical color wheel interface
- Color temperature control
- Preset color library

#### Cue & Scene Management
- Create, edit, delete cues
- Create, edit, delete scenes
- Store complete lighting states
- Cue timing settings (fade in/out, delay)
- Cue numbering and naming

#### Timeline/Sequence
- Arrange cues/scenes in timeline
- Playback control (play, pause, stop)
- Crossfade between cues
- Cue list editor
- Timeline scrubbing

#### Live View & Monitoring
- Real-time DMX value display for all active channels
- Live output monitor showing current state
- Channel activity indicators
- Universe overview

#### Map Overview
- Visual stage plot / fixture layout
- Drag-and-drop fixture positioning
- 2D representation of stage setup
- Quick fixture selection from map

#### UI/UX Design Philosophy
- **Inspired by grandMA2/MA2 console interface**
- Professional lighting console aesthetic
- Dark theme optimized for live environments
- Grid-based layout with encoders/faders representation
- Command line interface option
- Touchscreen-friendly controls
- Responsive design for tablets/mobile
- Keyboard shortcuts for power users

## Technology Stack

### Backend
- **Language:** Node.js with TypeScript
- **Serial Communication:** `serialport` library
- **WebSocket:** `ws` or `socket.io`
- **REST API:** Express.js with TypeScript
- **Architecture:** Clean OOP with classes and interfaces

### Frontend
- **HTML5 + Modern CSS Framework**
- **JavaScript/TypeScript with modern framework**
- **WebSocket client for real-time updates**
- **REST API client (fetch/axios)**

### Database (if needed)
- MySQL 8.0 (already in Docker setup)
- Proper ORM if used (TypeORM, Sequelize)

## Code Structure Example

```
dmx_web/
├── backend/
│   ├── src/
│   │   ├── controllers/     # API endpoint handlers
│   │   ├── services/        # Business logic
│   │   ├── models/          # Data models
│   │   ├── interfaces/      # TypeScript interfaces
│   │   ├── dmx/             # DMX-specific classes
│   │   └── app.ts           # Main application
│   ├── package.json
│   └── tsconfig.json
├── public/                   # Frontend (served by Apache)
│   ├── assets/
│   ├── js/
│   ├── css/
│   └── index.html
└── docker-compose.yml
```

## Naming Conventions
- Classes: PascalCase (e.g., `DmxController`, `LightFixture`)
- Methods/Functions: camelCase (e.g., `sendDmxData()`, `updateChannel()`)
- Constants: UPPER_SNAKE_CASE (e.g., `DMX_UNIVERSE_SIZE`)
- Files: kebab-case (e.g., `dmx-controller.ts`)

## Quality Requirements
- Type safety (TypeScript strict mode)
- Error handling on all external operations
- Input validation
- Proper logging
- Clean git commits
